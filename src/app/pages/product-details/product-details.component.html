<div class="container">
  <div class="header">
    <fa-icon class="icon" [icon]="faArrowLeft" [routerLink]="previousRoute"></fa-icon>
    <h1 class="page-title">Detalhes</h1>
  </div>
  <div *ngIf="genericProduct" class="page-content">
    <div class="product-summary">
      <div class="product-img" [style.background-image]="'url(' + currentCheapestProduct.imageUrl + ')'"></div>
      <div class="product-summary-text">
        <span>{{genericProduct.name}}</span>
        <span>{{genericProduct.currentLowestPricePrimaryValue | number:undefined :'pt'}} €</span>
        <span class="grey-text">Mais barato no(a):</span>
        <app-chain-sticker [chainId]="currentCheapestProduct.chain.id" [chainName]="currentCheapestProduct.chain.name"></app-chain-sticker>
      </div>
    </div>
    <div class="line"></div>
    <h3 class="subtitle">Detalhes do produto</h3>
    <div class="product-details">
      <div class="detail-row">
        <span class="detail-title">Marca</span>
        <span class="detail-value">{{genericProduct.brand!=="" ? genericProduct.brand : "N/A"}}</span>
      </div>
      <div class="detail-row">
        <span class="detail-title">Quantidade</span>
        <span class="detail-value">{{genericProduct.quantity!=="" ? genericProduct.quantity : "N/A"}}</span>
      </div>
      <div class="detail-row">
        <span class="detail-title">Preço por unidade</span>
        <span class="detail-value">{{currentLowestPrice.primaryValue | number:undefined :'pt'}} €</span>
      </div>
      <div class="detail-row">
        <span class="detail-title">Preço por {{currentLowestPrice.secondaryUnit !== "" ? currentLowestPrice.secondaryUnit : "Kg"}}</span>
        <span class="detail-value">{{currentLowestPrice.secondaryValue !== 0.0 ? ((currentLowestPrice.secondaryValue | number:undefined :'pt') + " €") : "N/A"}}</span>
      </div>
      <div class="detail-column">
        <span class="detail-title">Disponível em</span>
        <div class="chains">
          <app-chain-sticker *ngFor="let chain of genericProduct.chains" [chainId]="chain.id" [chainName]="chain.name"></app-chain-sticker>
        </div>
      </div>
      <div class="detail-row">
        <span class="detail-title">Categorias</span>
        <div class="categories">
          <span *ngFor="let category of genericProduct.categories" class="detail-value">{{category.name}}</span>
        </div>
      </div>
    </div>
    <div class="line"></div>
    <h3 class="subtitle">Histórico de preço</h3>
    <app-price-history-chart [products]="products"></app-price-history-chart>
  </div>

</div>
